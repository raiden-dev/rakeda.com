{"version":3,"file":"AbstractView.js","sources":["../../../../src/app/views/AbstractView.js"],"names":["define","AbstractView","Backbone","View","extend","bound","fn","bind","this","render","options","deferred","$","Deferred","getTemplateData","then","data","_","$el","html","template","each","partials","view","setElement","selector","onAfterRender","resolve","promise","noop"],"mappings":"AAAAA,QACE,YACC,WAED,GAAIC,GAAeC,SAASC,KAAKC,QAE/BC,MAAO,SAAUC,GACf,MAAOA,GAAGC,KAAKC,OAGjBC,OAAQ,SAAUC,GAChBA,EAAUA,KACV,IAAIC,GAAW,GAAIC,GAAEC,QA6BrB,OA3BAL,MAAKM,gBAAgBJ,GAClBK,KACCP,KAAKH,MAAM,SAAUW,GACnBA,EAAOA,MAEHN,EAAQM,OACVA,EAAOC,EAAEb,OAAOY,EAAMN,EAAQM,OAGhCR,KAAKU,IAAIC,KAAKX,KAAKY,SAASJ,OAI/BD,KACCP,KAAKH,MAAM,WACTY,EAAEI,KAAKb,KAAKc,SAAU,SAAUC,GAC9BA,EAAKC,WAAWD,EAAKL,IAAIO,UACzBF,EAAKd,cAKVM,KAAKP,KAAKkB,cAAcnB,KAAKC,OAE7BO,KAAKJ,EAASgB,SAGVhB,EAASiB,WAGlBd,gBAAiB,WACf,OAAO,GAAKF,GAAEC,UAAYc,UAAUC,WAGtCF,cAAed,EAAEiB,MAInB,OAAO5B","sourcesContent":["define([\n  'backbone'\n], function () {\n\n  var AbstractView = Backbone.View.extend({\n\n    bound: function (fn) {\n      return fn.bind(this);\n    },\n\n    render: function (options) {\n      options = options || {};\n      var deferred = new $.Deferred();\n\n      this.getTemplateData(options)\n        .then(\n          this.bound(function (data) {\n            data = data || {};\n\n            if (options.data) {\n              data = _.extend(data, options.data);\n            }\n\n            this.$el.html(this.template(data));\n          })\n        )\n\n        .then(\n          this.bound(function () {\n            _.each(this.partials, function (view) {\n              view.setElement(view.$el.selector);\n              view.render();\n            });\n          })\n        )\n\n        .then(this.onAfterRender.bind(this))\n\n        .then(deferred.resolve)\n      ;\n\n      return deferred.promise();\n    },\n\n    getTemplateData: function () {\n      return (new $.Deferred()).resolve().promise();\n    },\n\n    onAfterRender: $.noop\n\n  });\n\n  return AbstractView;\n\n});\n"]}